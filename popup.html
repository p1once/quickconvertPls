<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=340, initial-scale=1.0, user-scalable=no" />
  <title data-i18n="extName">QuickConvert+</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <link rel="stylesheet" href="popup.css" />
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-4 transition-colors duration-300">
  <div class="card bg-white/70 dark:bg-gray-800/70 backdrop-blur-lg border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg p-4 w-[340px] mx-auto transition-all">
    <div class="header-row flex items-center justify-between mb-3">
      <h1 data-i18n="popupTitle" class="app-title">QuickConvert+</h1>
      <div class="header-buttons">
        <button id="themeToggle" class="theme-toggle focus:ring-2 focus:ring-[var(--primary)] transition hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" aria-label="Toggle theme">
          <span class="theme-icon material-symbols-outlined">dark_mode</span>
        </button>
        <button id="settingsBtn" class="theme-toggle focus:ring-2 focus:ring-[var(--primary)] transition hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md" aria-label="Open settings">
          <span class="theme-icon material-symbols-outlined">settings</span>
        </button>
      </div>
    </div>

    <div class="field history-field">
      <label for="history" data-i18n="historyLabel">History</label>
      <div class="history-row">
        <select id="history" class="transition-colors duration-150 focus:ring-2 focus:ring-[var(--primary)] focus:outline-none rounded-md" aria-label="Conversion history"></select>
        <button id="exportBtn" class="export-btn transition-colors duration-150 hover:bg-[var(--primary-hover)]" data-i18n="exportButton">
          Export CSV
          <span id="exportLoader" class="export-loader"></span>
        </button>
      </div>
    </div>

    <div class="field">
      <label for="category" data-i18n="categoryLabel">Category</label>
      <select id="category" class="transition-colors duration-150 focus:ring-2 focus:ring-[var(--primary)] focus:outline-none rounded-md" aria-label="Choose category"></select>
    </div>

    <div class="field swap-group">
      <div class="unit-group">
        <label for="from" data-i18n="fromLabel">From</label>
        <select id="from" class="transition-colors duration-150 focus:ring-2 focus:ring-[var(--primary)] focus:outline-none rounded-md" aria-label="Unit from"></select>
      </div>
      <button id="swap" class="swap-btn transition-transform duration-300 hover:rotate-[-8deg] hover:scale-105">
        <svg viewBox="0 0 32 32" width="24" height="24" class="swap-svg">
          <path d="M8.3 11.7a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L12.4 8.3H24a1 1 0 1 1 0 2H12.4l2.3 2.3a1 1 0 0 1-1.4 1.4l-5-5zm15.4 8.6a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l2.3-2.3H8a1 1 0 1 1 0-2h11.6l-2.3-2.3a1 1 0 1 1 1.4-1.4l5 5z" fill="currentColor"/>
        </svg>
      </button>
      <div class="unit-group">
        <label for="to" data-i18n="toLabel">To</label>
        <select id="to" class="transition-colors duration-150 focus:ring-2 focus:ring-[var(--primary)] focus:outline-none rounded-md" aria-label="Unit to"></select>
      </div>
      <div id="loader" class="loader" role="status" aria-hidden="true"></div>
    </div>

    <div class="field">
      <label for="value" data-i18n="inputPlaceholder">Enter value</label>
      <input type="number" id="value" data-i18n-placeholder="inputPlaceholder" aria-label="Value to convert" autocomplete="off"/>
    </div>

    <div class="field">
      <label data-i18n="resultLabel">Result</label>
      <output id="result" aria-live="polite" style="display:none;">0</output>
    </div>

    <button id="copy" class="transition-colors duration-150 active:scale-95" data-i18n="copyButton">Copy</button>

    <!-- Crypto floating buttons -->
    <div id="cryptoSupport" class="crypto-support" aria-label="Support cryptocurrency donations">
      <button id="btcBtn" class="crypto-btn" aria-label="Bitcoin donation address">
        <img src="btc.svg" width="24" height="24" alt="Bitcoin icon" aria-hidden="true" />
      </button>
      <button id="supportBtn" class="crypto-btn" aria-label="Support">
        <img id="kofiIcon" class="kofi-icon" src="kofi_icon.svg" width="24" height="24" alt="Ko-fi icon" aria-hidden="true" />
      </button>
    </div>
  </div>

  <!-- Modale pour affichage adresse et QR -->
  <div id="cryptoModal" class="modal" style="display:none;" role="dialog" aria-modal="true" aria-labelledby="cryptoModalTitle">
    <div class="modal-content" id="cryptoModalContent">
      <div class="modal-header">
        <h2 id="cryptoModalTitle" data-i18n="cryptoModalTitle">Payment address</h2>
        <button id="cryptoModalClose" class="close-btn" aria-label="Close window">&times;</button>
      </div>
      <div class="modal-body">
        <p id="cryptoAddress" class="crypto-address break-all select-all font-mono cursor-pointer"></p>
        <span id="cryptoCopied" class="crypto-copied" style="display:none;">âœ” <span data-i18n="copiedText">Copied!</span></span>
        <img id="cryptoQRCode" alt="QR code address" class="w-44 h-44"/>
      </div>
    </div>
  </div>

  <!-- Ko-fi donation modal -->
  <div id="kofiModal" class="modal" style="display:none;" role="dialog" aria-modal="true" aria-labelledby="kofiModalTitle">
    <div class="modal-content kofi-modal-content">
      <div class="modal-header">
        <h2 id="kofiModalTitle" data-i18n="kofiModalTitle">Support me on Ko-fi</h2>
        <button id="kofiModalClose" class="close-btn" aria-label="Close window">&times;</button>
      </div>
      <div class="modal-body">
        <iframe id="kofiframe" data-src="https://ko-fi.com/p1p4ss/?hidefeed=true&widget=true&embed=true&preview=true" title="p1p4ss"></iframe>
      </div>
    </div>
  </div>

  <script type="module" src="popup.js"></script>
</body>
</html>
